<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="The Optical Radiation Exposure and Visual Experience Data Working Group">

<title>RDA Researcher Guide – Researcher Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8647a4a42273f773479d27c00df3f9ed.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://www.rd-alliance.org/groups/optical-radiation-exposure-and-visual-experience-data-wg/activity/" class="navbar-brand navbar-brand-logo">
    <img src="./images/RDA_Logotype_CMYK.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://www.rd-alliance.org/groups/optical-radiation-exposure-and-visual-experience-data-wg/activity/">
    <span class="navbar-title">Researcher Guide</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./license.html"> 
<span class="menu-text">License</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contributing.html"> 
<span class="menu-text">Contributing</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/RDA-WG-VisualExperienceData/ResearcherGuide"> <i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#scope" id="toc-scope" class="nav-link" data-scroll-target="#scope">Scope</a></li>
  <li><a href="#researcher-guide" id="toc-researcher-guide" class="nav-link" data-scroll-target="#researcher-guide">Researcher Guide</a>
  <ul class="collapse">
  <li><a href="#selecting-devices" id="toc-selecting-devices" class="nav-link" data-scroll-target="#selecting-devices">Selecting Devices</a>
  <ul class="collapse">
  <li><a href="#measurement-capabilities-and-sensor-characteristics" id="toc-measurement-capabilities-and-sensor-characteristics" class="nav-link" data-scroll-target="#measurement-capabilities-and-sensor-characteristics">Measurement capabilities and sensor characteristics</a></li>
  <li><a href="#advanced-and-additional-modalities" id="toc-advanced-and-additional-modalities" class="nav-link" data-scroll-target="#advanced-and-additional-modalities">Advanced and additional modalities</a></li>
  <li><a href="#manufacturer-calibration" id="toc-manufacturer-calibration" class="nav-link" data-scroll-target="#manufacturer-calibration">Manufacturer calibration</a></li>
  <li><a href="#size-form-and-design" id="toc-size-form-and-design" class="nav-link" data-scroll-target="#size-form-and-design">Size, form, and design</a></li>
  <li><a href="#battery-capacity" id="toc-battery-capacity" class="nav-link" data-scroll-target="#battery-capacity">Battery capacity</a></li>
  <li><a href="#data-storage" id="toc-data-storage" class="nav-link" data-scroll-target="#data-storage">Data storage</a></li>
  <li><a href="#raw-data-format-and-ease-of-use" id="toc-raw-data-format-and-ease-of-use" class="nav-link" data-scroll-target="#raw-data-format-and-ease-of-use">Raw data format and ease of use</a></li>
  <li><a href="#wearnon-wear-and-occlusion-detection" id="toc-wearnon-wear-and-occlusion-detection" class="nav-link" data-scroll-target="#wearnon-wear-and-occlusion-detection">Wear/non-wear and occlusion detection</a></li>
  <li><a href="#interaction-with-the-device" id="toc-interaction-with-the-device" class="nav-link" data-scroll-target="#interaction-with-the-device">Interaction with the device</a></li>
  <li><a href="#documentation" id="toc-documentation" class="nav-link" data-scroll-target="#documentation">Documentation</a></li>
  <li><a href="#software-ecosystem" id="toc-software-ecosystem" class="nav-link" data-scroll-target="#software-ecosystem">Software ecosystem</a></li>
  </ul></li>
  <li><a href="#validating-devices" id="toc-validating-devices" class="nav-link" data-scroll-target="#validating-devices">Validating Devices</a>
  <ul class="collapse">
  <li><a href="#standardized-validation-procedures" id="toc-standardized-validation-procedures" class="nav-link" data-scroll-target="#standardized-validation-procedures">Standardized validation procedures</a></li>
  <li><a href="#cross-comparison-with-reference-measurements" id="toc-cross-comparison-with-reference-measurements" class="nav-link" data-scroll-target="#cross-comparison-with-reference-measurements">Cross-comparison with reference measurements</a></li>
  <li><a href="#inter-device-variability-assessment" id="toc-inter-device-variability-assessment" class="nav-link" data-scroll-target="#inter-device-variability-assessment">Inter-device variability assessment</a></li>
  <li><a href="#intra-device-reliability-assessment" id="toc-intra-device-reliability-assessment" class="nav-link" data-scroll-target="#intra-device-reliability-assessment">Intra-device reliability assessment</a></li>
  <li><a href="#ease-of-calibration" id="toc-ease-of-calibration" class="nav-link" data-scroll-target="#ease-of-calibration">Ease of calibration</a></li>
  </ul></li>
  <li><a href="#designing-the-study" id="toc-designing-the-study" class="nav-link" data-scroll-target="#designing-the-study">Designing the Study</a>
  <ul class="collapse">
  <li><a href="#clarity-on-research-question" id="toc-clarity-on-research-question" class="nav-link" data-scroll-target="#clarity-on-research-question">Clarity on research question</a></li>
  <li><a href="#participant-burden-vs.-fidelity" id="toc-participant-burden-vs.-fidelity" class="nav-link" data-scroll-target="#participant-burden-vs.-fidelity">Participant burden vs.&nbsp;fidelity</a></li>
  <li><a href="#measurement-capabilities-matched-to-use-case" id="toc-measurement-capabilities-matched-to-use-case" class="nav-link" data-scroll-target="#measurement-capabilities-matched-to-use-case">Measurement capabilities matched to use case</a></li>
  <li><a href="#measurement-length-and-time-intervals" id="toc-measurement-length-and-time-intervals" class="nav-link" data-scroll-target="#measurement-length-and-time-intervals">Measurement length and time intervals</a></li>
  <li><a href="#inclusion-of-other-data" id="toc-inclusion-of-other-data" class="nav-link" data-scroll-target="#inclusion-of-other-data">Inclusion of other data</a></li>
  <li><a href="#behavioral-modification-through-wearing-location" id="toc-behavioral-modification-through-wearing-location" class="nav-link" data-scroll-target="#behavioral-modification-through-wearing-location">Behavioral modification through wearing location</a></li>
  </ul></li>
  <li><a href="#collecting-data" id="toc-collecting-data" class="nav-link" data-scroll-target="#collecting-data">Collecting Data</a>
  <ul class="collapse">
  <li><a href="#briefing-of-participants" id="toc-briefing-of-participants" class="nav-link" data-scroll-target="#briefing-of-participants">Briefing of participants</a></li>
  <li><a href="#recurrent-compliance-checks" id="toc-recurrent-compliance-checks" class="nav-link" data-scroll-target="#recurrent-compliance-checks">Recurrent compliance checks</a></li>
  <li><a href="#device-settings" id="toc-device-settings" class="nav-link" data-scroll-target="#device-settings">Device settings</a></li>
  </ul></li>
  <li><a href="#storing-and-documenting-data" id="toc-storing-and-documenting-data" class="nav-link" data-scroll-target="#storing-and-documenting-data">Storing and Documenting Data</a>
  <ul class="collapse">
  <li><a href="#consistent-file-format" id="toc-consistent-file-format" class="nav-link" data-scroll-target="#consistent-file-format">Consistent file format</a></li>
  <li><a href="#auxiliary-data" id="toc-auxiliary-data" class="nav-link" data-scroll-target="#auxiliary-data">Auxiliary data</a></li>
  <li><a href="#standard-directory-structure" id="toc-standard-directory-structure" class="nav-link" data-scroll-target="#standard-directory-structure">Standard directory structure</a></li>
  <li><a href="#documentation-of-anomalies" id="toc-documentation-of-anomalies" class="nav-link" data-scroll-target="#documentation-of-anomalies">Documentation of anomalies</a></li>
  <li><a href="#metadata" id="toc-metadata" class="nav-link" data-scroll-target="#metadata">Metadata</a></li>
  <li><a href="#privacy-aspects" id="toc-privacy-aspects" class="nav-link" data-scroll-target="#privacy-aspects">Privacy aspects</a></li>
  <li><a href="#locale-consistency" id="toc-locale-consistency" class="nav-link" data-scroll-target="#locale-consistency">Locale consistency</a></li>
  <li><a href="#recommended-conventions-for-datetime" id="toc-recommended-conventions-for-datetime" class="nav-link" data-scroll-target="#recommended-conventions-for-datetime">Recommended conventions for datetime</a></li>
  </ul></li>
  <li><a href="#maintaining-devices" id="toc-maintaining-devices" class="nav-link" data-scroll-target="#maintaining-devices">Maintaining Devices</a>
  <ul class="collapse">
  <li><a href="#cleaning" id="toc-cleaning" class="nav-link" data-scroll-target="#cleaning">Cleaning</a></li>
  <li><a href="#monitoring-and-correcting-device-drift" id="toc-monitoring-and-correcting-device-drift" class="nav-link" data-scroll-target="#monitoring-and-correcting-device-drift">Monitoring and correcting device drift</a></li>
  </ul></li>
  <li><a href="#analysing-data" id="toc-analysing-data" class="nav-link" data-scroll-target="#analysing-data">Analysing Data</a>
  <ul class="collapse">
  <li><a href="#data-cleaning-and-preprocessing" id="toc-data-cleaning-and-preprocessing" class="nav-link" data-scroll-target="#data-cleaning-and-preprocessing">Data cleaning and preprocessing</a></li>
  <li><a href="#exploration-and-exploratory-visualization" id="toc-exploration-and-exploratory-visualization" class="nav-link" data-scroll-target="#exploration-and-exploratory-visualization">Exploration and exploratory visualization</a></li>
  <li><a href="#merging-data-streams" id="toc-merging-data-streams" class="nav-link" data-scroll-target="#merging-data-streams">Merging data streams</a></li>
  <li><a href="#adding-context-to-the-time-series" id="toc-adding-context-to-the-time-series" class="nav-link" data-scroll-target="#adding-context-to-the-time-series">Adding context to the time series</a></li>
  <li><a href="#metric-selection" id="toc-metric-selection" class="nav-link" data-scroll-target="#metric-selection">Metric selection</a></li>
  <li><a href="#special-properties-of-light-and-visual-experience-data" id="toc-special-properties-of-light-and-visual-experience-data" class="nav-link" data-scroll-target="#special-properties-of-light-and-visual-experience-data">Special properties of light and visual experience data</a></li>
  </ul></li>
  <li><a href="#reporting-data" id="toc-reporting-data" class="nav-link" data-scroll-target="#reporting-data">Reporting Data</a>
  <ul class="collapse">
  <li><a href="#methods-section" id="toc-methods-section" class="nav-link" data-scroll-target="#methods-section">Methods section</a></li>
  <li><a href="#discussion-section" id="toc-discussion-section" class="nav-link" data-scroll-target="#discussion-section">Discussion section</a></li>
  <li><a href="#metadata-documentation" id="toc-metadata-documentation" class="nav-link" data-scroll-target="#metadata-documentation">Metadata documentation</a></li>
  <li><a href="#code-sharing" id="toc-code-sharing" class="nav-link" data-scroll-target="#code-sharing">Code sharing</a></li>
  <li><a href="#data-sharing" id="toc-data-sharing" class="nav-link" data-scroll-target="#data-sharing">Data sharing</a></li>
  <li><a href="#materials-sharing" id="toc-materials-sharing" class="nav-link" data-scroll-target="#materials-sharing">Materials sharing</a></li>
  <li><a href="#fair-data" id="toc-fair-data" class="nav-link" data-scroll-target="#fair-data">FAIR data</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/RDA-WG-VisualExperienceData/ResearcherGuide/edit/main/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/RDA-WG-VisualExperienceData/ResearcherGuide/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">RDA Researcher Guide</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>The Optical Radiation Exposure and Visual Experience Data Working Group </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>This site will shortly host the Research Data Alliance (RDA) Research Guide. The Research Guide is authored by the <a href="https://www.rd-alliance.org/groups/optical-radiation-exposure-and-visual-experience-data-wg/activity/">Optical Radiation Exposure and Visual Experience Data Working Group</a>. The site is built using <a href="https://quarto.org/docs/websites">Quarto</a>, a scientific and technical publishing system.</p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Exposure to the optical environment, sometimes called visual experience, fundamentally affects human physiology and behaviour at multiple time scales. Two examples of such effects that have received significant attention come from different research domains, but can be understood through a common retinally-referenced framework. The first concerns the ‘non-visual’ effect of light on human circadian and neuroendocrine physiology: The light-dark cycle synchronises the biological clock, and exposure to light at night suppresses melatonin production. The second concerns the potential effect of light exposure and visual experience on ocular development and specific myopia, in which time spent outdoors, and its associated visual experience, have been linked with ocular health outcomes.</p>
<p>In typical laboratory studies, light exposure can be fixed and held constant, or modulated parametrically. Such artificial exposures are very much unlike the real-world exposures to the optical environment that people received through the day. As people move in and between spaces (indoors and outdoors) and move their trunks, heads and eyes, the exposure to the optical environment varies significantly, and is modulated by behaviour. As a consequence, understanding real-world exposure to link to real-world impacts requires real-world measurements, faciliated by wearable devices.</p>
<p>Starting in the 1980s, technology to measure exposure to the optical environment has been developed and matured, with miniaturized illuminance sensors now (2025) being very common in consumer smartwatches. In research, several device and device types are available, which differ in their functionality. To make informed decisions about the properties of specific devices requires a careful ascertainment of their properties, and the specific trade-offs they entail.</p>
</section>
<section id="scope" class="level1">
<h1>Scope</h1>
<p>The scope of this Researcher Guide is to provide a guide to the use of wearable devices measuring the optical environment. It is a living document, and can be updated.</p>
</section>
<section id="researcher-guide" class="level1">
<h1>Researcher Guide</h1>
<section id="selecting-devices" class="level2">
<h2 class="anchored" data-anchor-id="selecting-devices">Selecting Devices</h2>
<section id="measurement-capabilities-and-sensor-characteristics" class="level3">
<h3 class="anchored" data-anchor-id="measurement-capabilities-and-sensor-characteristics">Measurement capabilities and sensor characteristics</h3>
<p>Spectral/photometric/α-opic metrics, sampling rate, uncertainty, cosine response, range, etc. <span class="citation" data-cites="Spitschan2022DigitHealth">(<a href="#ref-Spitschan2022DigitHealth" role="doc-biblioref">Spitschan et al. 2022</a>)</span></p>
<p><span class="citation" data-cites="vanDuijnhoven2025BuildEnviron">(<a href="#ref-vanDuijnhoven2025BuildEnviron" role="doc-biblioref">van Duijnhoven et al. 2025</a>)</span></p>
</section>
<section id="advanced-and-additional-modalities" class="level3">
<h3 class="anchored" data-anchor-id="advanced-and-additional-modalities">Advanced and additional modalities</h3>
<p>Spatial resolution, movement tracking, UV/IR detection.</p>
</section>
<section id="manufacturer-calibration" class="level3">
<h3 class="anchored" data-anchor-id="manufacturer-calibration">Manufacturer calibration</h3>
<p>Devices designed to measure light exposure and other aspects of the optical environment should come with information from the manufacturer on the calibration procedures used to ensure high-quality measurements. Sometimes, information for one exemplary device is included in a spec sheet or datasheet. It is worth consulting with the manufacturer on any calibrations they perform, and specifically clarify whether device-level information is available.</p>
<p>The manufacturer may also recommend recalibrations of the devices at regular intervals. It is worth understanding the rationale for any such recalibrations (in particular if they come at a cost), and also any recalibrations that can be done by researchers themselves.</p>
</section>
<section id="size-form-and-design" class="level3">
<h3 class="anchored" data-anchor-id="size-form-and-design">Size, form, and design</h3>
<p>The size, form and design of a wearable light logger is particular important for the specific contexts in which it will be used. Devices that are too heavy, bulky or impractically shaped will likely not be of particular use in field studies on light exposure. The most common form factors are devices that are <strong>wrist-worn</strong>, <strong>lanyard-worn</strong>, attached with a <strong>clip</strong>, or attached to <strong>spectacle frames</strong>.</p>
<p>Different form factors are susceptible to different types of occlusions, so beyond participant comfort, a device’s dimensions and intended use case are also directly linked to data reliability. As of 2025, no specific device can be used all the time in all contexts and provide reliable information.</p>
<p>Common problems include:</p>
<p>–&nbsp;Wrist-worn devices are susceptible to being occluded by sleeves, particularly in settings or cold weather seasons.</p>
<ul>
<li><p>Lanyard-worn and clip-worn devices are susceptible to being occluded by jackets or other outer garments.</p></li>
<li><p>Devices attached to spectacle frames are impractical for long-term use in the real world.</p></li>
</ul>
</section>
<section id="battery-capacity" class="level3">
<h3 class="anchored" data-anchor-id="battery-capacity">Battery capacity</h3>
<p>Battery life, charging cycles, power management.</p>
</section>
<section id="data-storage" class="level3">
<h3 class="anchored" data-anchor-id="data-storage">Data storage</h3>
<p>Storage capacity, retention, and privacy.</p>
</section>
<section id="raw-data-format-and-ease-of-use" class="level3">
<h3 class="anchored" data-anchor-id="raw-data-format-and-ease-of-use">Raw data format and ease of use</h3>
<p>Export formats, transfer speed, and syntactic structure.</p>
</section>
<section id="wearnon-wear-and-occlusion-detection" class="level3">
<h3 class="anchored" data-anchor-id="wearnon-wear-and-occlusion-detection">Wear/non-wear and occlusion detection</h3>
<p>Some devices may be able to detect whether they are being worn, either online, or after analysis using the manufacturer-provided software. For wrist-worn devices, this could be implemented through a capacitance sensor, or temperature sensor, or in conjunction with data from the IMU. Additionally, devices might be able to detect it is occluded.</p>
<p>When wear detection is not available from the device-inherent capabilities, it is recommended that researchers investigate concise methods for estimating wear/non-wear state, e.g.&nbsp;through additional questionnaires or using a data-driven approach.</p>
</section>
<section id="interaction-with-the-device" class="level3">
<h3 class="anchored" data-anchor-id="interaction-with-the-device">Interaction with the device</h3>
<p>Some devices contain event buttons, which, when pressed, insert time-stamped information into the data log. This functionality can be very useful for determining wear/non-wear state and specific events taking place for the participant. It is worth noting that as they are a user interaction, it is not guaranteed that participants will do it consistently.</p>
</section>
<section id="documentation" class="level3">
<h3 class="anchored" data-anchor-id="documentation">Documentation</h3>
<p>Quality of manufacturer documentation.</p>
</section>
<section id="software-ecosystem" class="level3">
<h3 class="anchored" data-anchor-id="software-ecosystem">Software ecosystem</h3>
<p>Features for annotation, tagging, and version control. <span class="citation" data-cites="Zauner2025JOpenSourceSoftw">(<a href="#ref-Zauner2025JOpenSourceSoftw" role="doc-biblioref">Zauner, Hartmeyer, and Spitschan 2025</a>)</span></p>
</section>
</section>
<section id="validating-devices" class="level2">
<h2 class="anchored" data-anchor-id="validating-devices">Validating Devices</h2>
<section id="standardized-validation-procedures" class="level3">
<h3 class="anchored" data-anchor-id="standardized-validation-procedures">Standardized validation procedures</h3>
<p>General principles and methodology.</p>
</section>
<section id="cross-comparison-with-reference-measurements" class="level3">
<h3 class="anchored" data-anchor-id="cross-comparison-with-reference-measurements">Cross-comparison with reference measurements</h3>
<p>Using standard light sources.</p>
</section>
<section id="inter-device-variability-assessment" class="level3">
<h3 class="anchored" data-anchor-id="inter-device-variability-assessment">Inter-device variability assessment</h3>
<p>Comparing devices.</p>
</section>
<section id="intra-device-reliability-assessment" class="level3">
<h3 class="anchored" data-anchor-id="intra-device-reliability-assessment">Intra-device reliability assessment</h3>
<p>Same-device repeatability.</p>
</section>
<section id="ease-of-calibration" class="level3">
<h3 class="anchored" data-anchor-id="ease-of-calibration">Ease of calibration</h3>
<p>Individual recalibration support.</p>
</section>
</section>
<section id="designing-the-study" class="level2">
<h2 class="anchored" data-anchor-id="designing-the-study">Designing the Study</h2>
<section id="clarity-on-research-question" class="level3">
<h3 class="anchored" data-anchor-id="clarity-on-research-question">Clarity on research question</h3>
<p>Research questions, hypotheses, procedures and methods need to be aligned. In the context of measuring visual experience and light exposure, measuring one day of light exposure to understand seasonal effects is inappropriate.</p>
</section>
<section id="participant-burden-vs.-fidelity" class="level3">
<h3 class="anchored" data-anchor-id="participant-burden-vs.-fidelity">Participant burden vs.&nbsp;fidelity</h3>
<p>Balancing precision with practicality.</p>
</section>
<section id="measurement-capabilities-matched-to-use-case" class="level3">
<h3 class="anchored" data-anchor-id="measurement-capabilities-matched-to-use-case">Measurement capabilities matched to use case</h3>
<p>Light level dependence.</p>
</section>
<section id="measurement-length-and-time-intervals" class="level3">
<h3 class="anchored" data-anchor-id="measurement-length-and-time-intervals">Measurement length and time intervals</h3>
<p>Sampling strategy and battery considerations.</p>
</section>
<section id="inclusion-of-other-data" class="level3">
<h3 class="anchored" data-anchor-id="inclusion-of-other-data">Inclusion of other data</h3>
<p>Sleep, activity, and context. <span class="citation" data-cites="Guidolin2045BMCPublicHealth">(<a href="#ref-Guidolin2045BMCPublicHealth" role="doc-biblioref">Guidolin et al. 2024</a>)</span></p>
</section>
<section id="behavioral-modification-through-wearing-location" class="level3">
<h3 class="anchored" data-anchor-id="behavioral-modification-through-wearing-location">Behavioral modification through wearing location</h3>
<p>How wear location may affect behavior.</p>
</section>
</section>
<section id="collecting-data" class="level2">
<h2 class="anchored" data-anchor-id="collecting-data">Collecting Data</h2>
<section id="briefing-of-participants" class="level3">
<h3 class="anchored" data-anchor-id="briefing-of-participants">Briefing of participants</h3>
<p>Instructions and precautions.</p>
</section>
<section id="recurrent-compliance-checks" class="level3">
<h3 class="anchored" data-anchor-id="recurrent-compliance-checks">Recurrent compliance checks</h3>
<p>Monitoring adherence.</p>
</section>
<section id="device-settings" class="level3">
<h3 class="anchored" data-anchor-id="device-settings">Device settings</h3>
<p>Logging configuration, time sync, DST handling.</p>
</section>
</section>
<section id="storing-and-documenting-data" class="level2">
<h2 class="anchored" data-anchor-id="storing-and-documenting-data">Storing and Documenting Data</h2>
<section id="consistent-file-format" class="level3">
<h3 class="anchored" data-anchor-id="consistent-file-format">Consistent file format</h3>
<p>Non-proprietary standard formats.</p>
</section>
<section id="auxiliary-data" class="level3">
<h3 class="anchored" data-anchor-id="auxiliary-data">Auxiliary data</h3>
<p>Surveys, companion apps.</p>
</section>
<section id="standard-directory-structure" class="level3">
<h3 class="anchored" data-anchor-id="standard-directory-structure">Standard directory structure</h3>
<p>File organization.</p>
</section>
<section id="documentation-of-anomalies" class="level3">
<h3 class="anchored" data-anchor-id="documentation-of-anomalies">Documentation of anomalies</h3>
<p>Participant-reported issues.</p>
</section>
<section id="metadata" class="level3">
<h3 class="anchored" data-anchor-id="metadata">Metadata</h3>
<p>Standardized documentation. [Spitschan2024BMCDigitHealth]</p>
</section>
<section id="privacy-aspects" class="level3">
<h3 class="anchored" data-anchor-id="privacy-aspects">Privacy aspects</h3>
<p>Anonymization, PII handling.</p>
</section>
<section id="locale-consistency" class="level3">
<h3 class="anchored" data-anchor-id="locale-consistency">Locale consistency</h3>
<p>Date/time formats, decimal markers.</p>
</section>
<section id="recommended-conventions-for-datetime" class="level3">
<h3 class="anchored" data-anchor-id="recommended-conventions-for-datetime">Recommended conventions for datetime</h3>
<p>Best practices for timestamp handling.</p>
</section>
</section>
<section id="maintaining-devices" class="level2">
<h2 class="anchored" data-anchor-id="maintaining-devices">Maintaining Devices</h2>
<section id="cleaning" class="level3">
<h3 class="anchored" data-anchor-id="cleaning">Cleaning</h3>
<p>Hygiene and maintenance.</p>
</section>
<section id="monitoring-and-correcting-device-drift" class="level3">
<h3 class="anchored" data-anchor-id="monitoring-and-correcting-device-drift">Monitoring and correcting device drift</h3>
<p>Detecting and recalibrating drift.</p>
</section>
</section>
<section id="analysing-data" class="level2">
<h2 class="anchored" data-anchor-id="analysing-data">Analysing Data</h2>
<section id="data-cleaning-and-preprocessing" class="level3">
<h3 class="anchored" data-anchor-id="data-cleaning-and-preprocessing">Data cleaning and preprocessing</h3>
<p>Non-wear, missing data, aggregation.</p>
</section>
<section id="exploration-and-exploratory-visualization" class="level3">
<h3 class="anchored" data-anchor-id="exploration-and-exploratory-visualization">Exploration and exploratory visualization</h3>
<p>Visual strategies for time series.</p>
</section>
<section id="merging-data-streams" class="level3">
<h3 class="anchored" data-anchor-id="merging-data-streams">Merging data streams</h3>
<p>Syncing sleep, activity, and light data.</p>
</section>
<section id="adding-context-to-the-time-series" class="level3">
<h3 class="anchored" data-anchor-id="adding-context-to-the-time-series">Adding context to the time series</h3>
<p>Chronotype, location data, etc.</p>
</section>
<section id="metric-selection" class="level3">
<h3 class="anchored" data-anchor-id="metric-selection">Metric selection</h3>
<p>Duration vs.&nbsp;intensity metrics.</p>
</section>
<section id="special-properties-of-light-and-visual-experience-data" class="level3">
<h3 class="anchored" data-anchor-id="special-properties-of-light-and-visual-experience-data">Special properties of light and visual experience data</h3>
<p>Zero inflation, dynamic range.</p>
</section>
</section>
<section id="reporting-data" class="level2">
<h2 class="anchored" data-anchor-id="reporting-data">Reporting Data</h2>
<section id="methods-section" class="level3">
<h3 class="anchored" data-anchor-id="methods-section">Methods section</h3>
<p>For transparency and to ensure that others can replicate and reproduce the measurement protocol and study, it is key to document various aspects related to the measurement of visual experience and light exposure. At a minimum, it is recommended to include text on the following points:</p>
<ul>
<li>Device-related properties
<ul>
<li>Manufacturer, brand and make of wearable device used</li>
<li>Wearing location</li>
<li>Sampling interval</li>
<li>Measured quantities</li>
<li>Calibration information</li>
</ul></li>
<li>Protocol-related properties
<ul>
<li>Wearing location</li>
<li>Wearing duration</li>
<li>Instructions given to the participant</li>
</ul></li>
</ul>
</section>
<section id="discussion-section" class="level3">
<h3 class="anchored" data-anchor-id="discussion-section">Discussion section</h3>
<p>Study design, device rationale.</p>
</section>
<section id="metadata-documentation" class="level3">
<h3 class="anchored" data-anchor-id="metadata-documentation">Metadata documentation</h3>
<p>Thorough sharing practices.</p>
</section>
<section id="code-sharing" class="level3">
<h3 class="anchored" data-anchor-id="code-sharing">Code sharing</h3>
<p>Preprocessing and analysis scripts. <span class="citation" data-cites="Zauner2025JOpenSourceSoftw">(<a href="#ref-Zauner2025JOpenSourceSoftw" role="doc-biblioref">Zauner, Hartmeyer, and Spitschan 2025</a>)</span></p>
</section>
<section id="data-sharing" class="level3">
<h3 class="anchored" data-anchor-id="data-sharing">Data sharing</h3>
<p>Ethical and practical aspects.</p>
</section>
<section id="materials-sharing" class="level3">
<h3 class="anchored" data-anchor-id="materials-sharing">Materials sharing</h3>
<p>To ensure the reproducibility of research studies, it is recommended to share the materials used throughout the study, including any instruction sheets given to the participant, survey questions used, as well as debriefing documents. For any digital materials, such as forms served on a survey platform (such as REDCap), it is recommended, that the materials are provided in a format ingestible/importable by the platform</p>
</section>
<section id="fair-data" class="level3">
<h3 class="anchored" data-anchor-id="fair-data">FAIR data</h3>
<p>The FAIR principles state that data should be <strong>f</strong>indable, <strong>a</strong>ccessible, <strong>i</strong>nteroperable and <strong>r</strong>eusable, to make them easier to share and reusable. Several of the points raised in this Researcher Guide are driven to ensure that visual experience and optical radiation data are FAIR, including standard file formats and documentation. Importantly, FAIR data guarantees that the collected data are used sustainably, and available well beyond the specific published research articles.</p>
<p>Data can be published as part of the supplementary material of journals. An alternative option is to add them as data packages to specific repositories, such as <a href="https://zenodo.org/">Zenodo</a> or <a href="https://figshare.org/">FigShare</a>.</p>



</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Guidolin2045BMCPublicHealth" class="csl-entry" role="listitem">
Guidolin, C., S. Aerts, G. K. Agbeshie, K. O. Akuffo, S. N. Aydin, D. Baeza-Moyano, J. Bolte, et al. 2024. <span>“Protocol for a Prospective, Multicentre, Cross-Sectional Cohort Study to Assess Personal Light Exposure.”</span> Journal Article. <em>BMC Public Health</em> 24 (1): 3285. <a href="https://doi.org/10.1186/s12889-024-20206-4">https://doi.org/10.1186/s12889-024-20206-4</a>.
</div>
<div id="ref-Spitschan2022DigitHealth" class="csl-entry" role="listitem">
Spitschan, M., K. Smolders, B. Vandendriessche, B. Bent, J. P. Bakker, I. R. Rodriguez-Chavez, and C. Vetter. 2022. <span>“Verification, Analytical Validation and Clinical Validation (V3) of Wearable Dosimeters and Light Loggers.”</span> Journal Article. <em>Digit Health</em> 8: 20552076221144858. <a href="https://doi.org/10.1177/20552076221144858">https://doi.org/10.1177/20552076221144858</a>.
</div>
<div id="ref-vanDuijnhoven2025BuildEnviron" class="csl-entry" role="listitem">
van Duijnhoven, J., S. L. Hartmeyer, A. Didikoglu, O. Stefani, K. W. Houser, V. Kalavally, and M. Spitschan. 2025. <span>“Measuring Light Exposure in Daily Life: A Review of Wearable Light Loggers.”</span> Journal Article. <em>Build Environ</em> 274. <a href="https://doi.org/10.1016/j.buildenv.2025.112771">https://doi.org/10.1016/j.buildenv.2025.112771</a>.
</div>
<div id="ref-Zauner2025JOpenSourceSoftw" class="csl-entry" role="listitem">
Zauner, J., S. Hartmeyer, and M. Spitschan. 2025. <span>“LightLogR: Reproducible Analysis of Personal Light Exposure Data.”</span> Journal Article. <em>J Open Source Softw</em> 10 (107): 7601. <a href="https://doi.org/10.21105/joss.07601">https://doi.org/10.21105/joss.07601</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/rda-wg-visualexperiencedata\.github\.io\/ResearcherGuide\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/RDA-WG-VisualExperienceData/ResearcherGuide/edit/main/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/RDA-WG-VisualExperienceData/ResearcherGuide/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>